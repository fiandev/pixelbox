<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pixel Art Studio - Create Amazing Pixel Art Online | PixelBox</title>
    <meta
      name="description"
      content="Create stunning pixel art online with PixelBox. Professional pixel art editor with drawing tools, effects, and export options. Perfect for game developers and digital artists."
    />
    <meta
      name="keywords"
      content="pixel art, pixel art editor, online pixel art, pixel art creator, pixel art tools, game art, sprite editor, pixel drawing"
    />
    <meta name="author" content="Fiandev" />
    <meta name="robots" content="index, follow" />
    <meta
      property="og:title"
      content="Pixel Art Studio - Create Amazing Pixel Art Online | PixelBox"
    />
    <meta
      property="og:description"
      content="Create stunning pixel art online with PixelBox. Professional pixel art editor with drawing tools, effects, and export options."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pixel-studio.fiandev.com" />
    <meta property="og:image" content="https://fiandev.com/og-image.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Pixel Art Studio - Create Amazing Pixel Art Online | PixelBox"
    />
    <meta
      name="twitter:description"
      content="Create stunning pixel art online with PixelBox. Professional pixel art editor with drawing tools, effects, and export options."
    />
    <meta name="twitter:image" content="https://fiandev.com/og-image.png" />
    <link
      rel="icon"
      type="image/png"
      href="https://fiandev.com/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="https://fiandev.com/favicon.svg"
    />
    <link rel="shortcut icon" href="https://fiandev.com/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://fiandev.com/apple-touch-icon.png"
    />
    <link rel="manifest" href="https://fiandev.com/site.webmanifest" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      canvas {
        image-rendering: pixelated;
        image-rendering: crisp-edges;
      }
      .canvas-container {
        background-image:
          linear-gradient(45deg, #1e293b 25%, transparent 25%),
          linear-gradient(-45deg, #1e293b 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #1e293b 75%),
          linear-gradient(-45deg, transparent 75%, #1e293b 75%);
        background-size: 20px 20px;
        background-position:
          0 0,
          0 10px,
          10px -10px,
          -10px 0px;
      }
      .tool-active {
        background-color: #3b82f6 !important;
        color: white;
      }
      .drag-over {
        background-color: rgba(59, 130, 246, 0.1) !important;
        outline: 2px dashed #3b82f6;
        outline-offset: -4px;
      }
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
      }

      .sidebar.open {
        transform: translateX(0);
      }

      .overlay {
        display: none;
      }

      .overlay.active {
        display: block;
      }
    </style>
  </head>
  <body
    class="h-screen flex flex-col text-slate-200 bg-slate-900 overflow-hidden"
  >
    <header
      class="bg-slate-900 border-b border-slate-700 p-4 flex md:flex-row flex-col gap-2 md:gap-0 md:justify-between md:items-center shrink-0"
    >
      <div class="flex items-center gap-4">
        <button
          id="menu-toggle"
          class="md:hidden text-slate-300 focus:outline-none"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <h1 class="text-xl font-bold tracking-tight text-blue-400">
          PIXEL<span class="text-white">BOX</span>
        </h1>
      </div>
      <div class="flex gap-4 items-center">
        <input type="file" id="image-upload" accept="image/*" class="hidden" />
        <button
          onclick="document.getElementById('image-upload').click()"
          class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-medium transition flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <g
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-width="1.5"
            >
              <path
                stroke-linejoin="round"
                d="M21.25 13V8.5a5 5 0 0 0-5-5h-8.5a5 5 0 0 0-5 5v7a5 5 0 0 0 5 5h6.26"
              />
              <path
                stroke-linejoin="round"
                d="m3.01 17l2.74-3.2a2.2 2.2 0 0 1 2.77-.27a2.2 2.2 0 0 0 2.77-.27l2.33-2.33a4 4 0 0 1 5.16-.43l2.47 1.91M8.01 10.17a1.66 1.66 0 1 0-.02-3.32a1.66 1.66 0 0 0 .02 3.32"
              />
              <path stroke-miterlimit="10" d="M18.994 15.5v5M16.5 18.005h5" />
            </g>
          </svg>
          <span class="hidden md:block">Import Gambar</span>
        </button>
        <div class="flex bg-slate-800 rounded-lg p-1 gap-1">
          <button
            id="tool-draw"
            class="p-2 rounded-md hover:bg-slate-700 transition tool-active"
            title="Draw"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="m12 19 7-7 3 3-7 7-3-3z" />
              <path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z" />
              <path d="m2 2 5 5" />
              <path d="m9.5 14.5 4 4" />
            </svg>
          </button>
          <button
            id="tool-erase"
            class="p-2 rounded-md hover:bg-slate-700 transition"
            title="Erase"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"
              />
              <path d="M22 21H7" />
              <path d="m5 11 9 9" />
            </svg>
          </button>
          <button
            id="tool-picker"
            class="p-2 rounded-md hover:bg-slate-700 transition"
            title="Color Picker"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="m2 22 1-1h3l9-9" />
              <path d="M3 21v-3l9-9" />
              <path d="m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l-3-3Z" />
            </svg>
          </button>
        </div>
        <input
          type="color"
          id="color-input"
          value="#3b82f6"
          class="w-10 h-10 border-none rounded cursor-pointer bg-transparent"
        />
        <button
          id="export-btn"
          class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-medium transition flex items-center gap-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="18"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" x2="12" y1="15" y2="3" />
          </svg>
          <span class="hidden md:block">Export</span>
        </button>
      </div>
    </header>

    <div
      class="overlay hidden fixed top-0 left-0 right-0 bottom-0 bg-black/50 z-40 backdrop-blur-sm"
      id="overlay"
    ></div>

    <main class="relative flex-1 flex flex-col md:flex-row overflow-hidden">
      <aside
        id="sidebar"
        class="sidebar w-full bg-slate-900 border-r border-slate-700 p-4 space-y-6 shrink-0 overflow-y-auto -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out fixed top-0 left-0 h-full z-40 w-72 md:w-72 md:static overflow-y-auto"
      >
        <!-- Close button for mobile -->
        <div class="flex justify-between md:hidden mb-4">
          <h1 class="block md:hidden font-bold tracking-tight text-blue-400">
            PIXEL<span class="text-white">BOX</span>
          </h1>
          <button id="close-sidebar" class="text-slate-300 hover:text-white">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        <section>
          <label class="block text-sm font-medium text-slate-400 mb-2"
            >Resolusi</label
          >
          <select
            id="res-select"
            class="w-full bg-slate-800 border border-slate-700 rounded-md p-2 text-sm"
          >
            <option value="1:1">1:1 Kotak</option>
            <option value="4:3">4:3 Klasik</option>
            <option value="18:9">18:9 Widescreen</option>
          </select>
        </section>
        <section>
          <label class="block text-sm font-medium text-slate-400 mb-2"
            >Orientasi</label
          >
          <div class="grid grid-cols-2 gap-2">
            <button
              id="orient-h"
              class="bg-slate-800 p-2 rounded border border-slate-700 tool-active text-xs"
            >
              Horizontal
            </button>
            <button
              id="orient-v"
              class="bg-slate-800 p-2 rounded border border-slate-700 text-xs"
            >
              Vertikal
            </button>
          </div>
        </section>
        <section>
          <label class="block text-sm font-medium text-slate-400 mb-2"
            >Kepadatan Grid</label
          >
          <input
            type="range"
            id="density-slider"
            min="16"
            max="128"
            step="1"
            value="32"
            class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"
          />
          <div class="flex justify-between text-[10px] text-slate-500 mt-1">
            <span>16px</span>
            <span id="density-val">32px</span>
            <span>128px</span>
          </div>
        </section>
        <section>
          <label
            class="block text-sm font-medium text-slate-400 mb-2 text-indigo-400 font-bold"
            >Efek Pixelate</label
          >
          <input
            type="range"
            id="pixelate-slider"
            min="1"
            max="50"
            step="1"
            value="1"
            class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-indigo-500"
          />
          <div class="flex justify-between text-[10px] text-slate-500 mt-1">
            <span>Normal</span>
            <span id="pixelate-val">1px</span>
            <span>Maks</span>
          </div>
        </section>
        <section>
          <label class="block text-sm font-medium text-slate-400 mb-2"
            >Ukuran Kuas</label
          >
          <input
            type="range"
            id="brush-slider"
            min="1"
            max="10"
            step="1"
            value="1"
            class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-blue-500"
          />
          <div class="flex justify-between text-[10px] text-slate-500 mt-1">
            <span>1px</span>
            <span id="brush-val">1px</span>
            <span>10px</span>
          </div>
        </section>
        <section class="pt-4">
          <button
            id="clear-btn"
            class="w-full border border-red-900/50 hover:bg-red-900/20 text-red-400 p-2 rounded text-sm transition"
          >
            Bersihkan Kanvas
          </button>
        </section>
        <div class="ads-horizontal"></div>
      </aside>

      <div
        id="drop-zone"
        class="flex-1 canvas-container p-8 overflow-auto transition-colors flex items-center justify-center"
      >
        <canvas
          id="pixel-canvas"
          class="cursor-crosshair shadow-[0_0_20px_rgba(0,0,0,0.5)] transition-[width,height] duration-100 ease-linear bg-white"
          style="image-rendering: pixelated; image-rendering: crisp-edges"
        ></canvas>
      </div>

      <div class="fixed bottom-4 right-4 grid grid-cols-3 gap-2">
        <button
          id="zoom-out"
          class="bg-slate-800 p-2 rounded border border-slate-700 hover:bg-slate-700 transition"
          title="Zoom Out"
        >
          <svg
            class="mx-auto"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" x2="16.65" y1="21" y2="16.65" />
            <line x1="8" x2="14" y1="11" y2="11" />
          </svg>
        </button>
        <button
          id="zoom-reset"
          class="bg-slate-800 p-2 rounded border border-slate-700 hover:bg-slate-700 transition text-[10px]"
          title="Reset Zoom"
        >
          100%
        </button>
        <button
          id="zoom-in"
          class="bg-slate-800 p-2 rounded border border-slate-700 hover:bg-slate-700 transition"
          title="Zoom In"
        >
          <svg
            class="mx-auto"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" x2="16.65" y1="21" y2="16.65" />
            <line x1="11" x2="11" y1="8" y2="14" />
            <line x1="8" x2="14" y1="11" y2="11" />
          </svg>
        </button>
      </div>
    </main>

    <script src="js/pixel-editor.js"></script>
    <script src="js/main.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@fiandev/ads@1.0.2/dist/ads.umd.min.js"
      defer
    ></script>
    <script>
      // Initialize ads
      document.addEventListener("DOMContentLoaded", () => {
        ads.init({
          url: "/ads.json",
          debug: true,
          requestTimeout: 5000,
        });

        // Mobile menu functionality
        const menuToggle = document.getElementById("menu-toggle");
        const closeSidebar = document.getElementById("close-sidebar");
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("overlay");

        // Toggle sidebar open/closed - adding 'open' class as referenced in CSS
        menuToggle?.addEventListener("click", () => {
          sidebar.classList.toggle("open");
          sidebar.classList.toggle("-translate-x-full");
          sidebar.classList.toggle("translate-x-0");
          overlay.classList.toggle("active");
          overlay.classList.toggle("hidden");
        });

        closeSidebar?.addEventListener("click", () => {
          sidebar.classList.remove("open");
          sidebar.classList.add("-translate-x-full");
          sidebar.classList.remove("translate-x-0");
          overlay.classList.remove("active");
          overlay.classList.add("hidden");
        });

        overlay?.addEventListener("click", () => {
          sidebar.classList.remove("open");
          sidebar.classList.add("-translate-x-full");
          sidebar.classList.remove("translate-x-0");
          overlay.classList.remove("active");
          overlay.classList.add("hidden");
        });

        // Tool active state management - keeping the tool-active class that CSS handles
        const tools = ["draw", "erase", "picker"];
        tools.forEach((tool) => {
          const toolBtn = document.getElementById(`tool-${tool}`);
          if (toolBtn) {
            toolBtn.addEventListener("click", () => {
              // Reset all tool buttons by removing tool-active
              tools.forEach((t) => {
                const btn = document.getElementById(`tool-${t}`);
                if (btn) {
                  btn.classList.add("hover:bg-slate-700");
                  btn.classList.remove("tool-active");
                }
              });

              // Set clicked button as active with tool-active class
              toolBtn.classList.remove("hover:bg-slate-700");
              toolBtn.classList.add("tool-active");
            });
          }
        });

        // Orientation toggle - keeping the tool-active class that CSS handles
        const orientH = document.getElementById("orient-h");
        const orientV = document.getElementById("orient-v");

        orientH?.addEventListener("click", () => {
          orientH.classList.add("tool-active");
          orientV.classList.remove("tool-active");
        });

        orientV?.addEventListener("click", () => {
          orientV.classList.add("tool-active");
          orientH.classList.remove("tool-active");
        });

        // Canvas drop zone functionality
        const dropZone = document.getElementById("drop-zone");
        ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
          dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
          e.preventDefault();
          e.stopPropagation();
        }

        ["dragenter", "dragover"].forEach((eventName) => {
          dropZone.addEventListener(eventName, highlight, false);
        });

        ["dragleave", "drop"].forEach((eventName) => {
          dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
          dropZone.classList.add(
            "bg-blue-500/10",
            "outline",
            "outline-2",
            "outline-blue-500",
            "outline-offset--4",
          );
        }

        function unhighlight(e) {
          dropZone.classList.remove(
            "bg-blue-500/10",
            "outline",
            "outline-2",
            "outline-blue-500",
            "outline-offset--4",
          );
        }
      });
    </script>
  </body>
</html>
